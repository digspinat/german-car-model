<br>
<div class="pure-g mobileviewsidebar" style="background-color:#e1e9ee;">
    <div class="pure-u-24-24">
      {{ partial "filter.html" . }}
    </div>
</div>
<div class="pure-g">
    <div class="pure-u-17-24">
      <div class="container">
      <div class="row" id="productdata">
        {{ range (where .Site.Pages "Section" "manual") }}
          {{ if eq .Title "Manuals" }}

          {{else}}
            <div class="col-md-4">
                <div class="ibox">
                    <div class="ibox-content product-box">
                        <div class="product-imitation">
                            <img src="{{ .Params.image.url }}" alt="" height="200px;" width="200px;">
                        </div>
                        <div class="product-desc">
                            <span class="product-price">
                                Price: ${{ .Params.product_price }}
                            </span>
                            <small class="text-muted"></small>
                            <a href="{{ .Permalink }}" class="product-name">{{ .Title }}</a>
                            <div class="m-t text-righ">
                                <a href="{{ .Permalink }}" class="btn btn-xs btn-outline btn-primary">Info <i class="fa fa-long-arrow-right"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
          {{end}}
        {{ end }}
      </div>
      <script type="text/javascript">
        var client = algoliasearch("YZO8M6AZ6J", "847f24047332edf2bb6a0c1f0181b83e");
        var index = client.initIndex('new_allcar');

        $(document).on('click','.brand',function(){
          var brandcheck = 0;
          $('.brand').each(function(){
            if($(this).is(':checked')){
              brandcheck = 1;
            }
          });
          if(brandcheck == 1){
            var seriescheck = 0;
            var yearcheck = 0;
            var bodytypecheck = 0;
            var enginecheck = 0;
            var fueltypecheck = 0;
            var manualcheck = 0;
            var pricecheck = 0;
            $('.series').each(function(){
              if($(this).is(':checked')){
                seriescheck = 1;
              }
            });
            $('.year').each(function(){
              if($(this).is(':checked')){
                yearcheck = 1;
              }
            });
            $('.bodytype').each(function(){
              if($(this).is(':checked')){
                bodytypecheck = 1;
              }
            });
            $('.engine').each(function(){
              if($(this).is(':checked')){
                enginecheck = 1;
              }
            });
            $('.fueltype').each(function(){
              if($(this).is(':checked')){
                fueltypecheck = 1;
              }
            });
            $('.manual').each(function(){
              if($(this).is(':checked')){
                manualcheck = 1;
              }
            });
            $('.price').each(function(){
              if($(this).is(':checked')){
                pricecheck = 1;
              }
            });
            if(seriescheck){
              if(yearcheck){
                if(bodytypecheck){
                  if(enginecheck){
                    if(fueltypecheck){
                      if(manualcheck){
                        if(pricecheck){

                        }else{
                          //Search here brand, series, year, body, engine, fueltype, manual
                        }
                      }else{
                        //Search here brand, series, year, body, engine, fueltype
                        $('.price').each(function(){
                          $(this).prop('checked',false);
                        });
                      }
                    }else{
                      //Search here Brand, Series, Year, Body, engine
                      $('.manual').each(function(){
                        $(this).prop('checked',false);
                      });
                      $('.price').each(function(){
                        $(this).prop('checked',false);
                      });
                    }
                  }else{
                    // Search here Brand, Series, Year, Body
                    $('.fueltype').each(function(){
                      $(this).prop('checked',false);
                    });
                    $('.manual').each(function(){
                      $(this).prop('checked',false);
                    });
                    $('.price').each(function(){
                      $(this).prop('checked',false);
                    });
                  }
                }else{
                  //Search here Brand, Series, year
                  $('.engine').each(function(){
                    $(this).prop('checked',false);
                  });
                  $('.fueltype').each(function(){
                    $(this).prop('checked',false);
                  });
                  $('.manual').each(function(){
                    $(this).prop('checked',false);
                  });
                  $('.price').each(function(){
                    $(this).prop('checked',false);
                  });
                }
              }else{
                //search here Brand and Series

                $('.bodytype').each(function(){
                  $(this).prop('checked',false);
                });
                $('.engine').each(function(){
                  $(this).prop('checked',false);
                });
                $('.fueltype').each(function(){
                  $(this).prop('checked',false);
                });
                $('.manual').each(function(){
                  $(this).prop('checked',false);
                });
                $('.price').each(function(){
                  $(this).prop('checked',false);
                });
              }
            }else{
              //search here Brand
              var MainSearch = []
              var brandsearch = []
              $('.brand').each(function(){
                if (this.checked) {
                  var brand = $(this).val();
                  brandsearch.push("manualBrand.en:"+brand)
                }
              });
              MainSearch.push(brandsearch);
              index.search({
                query: '*',
                facetFilters: MainSearch
              }).then(res => {
                // console.log(res);
                var prodcuct = ""
                $.each(res.hits, function( i, val ){
                  prodcuct += "<div class='col-md-4'>"+
                      "<div class='ibox'>"+
                          "<div class='ibox-content product-box'>"+
                              "<div class='product-imitation'>"+
                                  "<img src='https://www.datocms-assets.com"+val['manualImage'].path+"' alt='' height='200px;' width='200px;'>"+
                              "</div>"+
                              "<div class='product-desc'>"+
                                  "<span class='product-price'>"+
                                      "Price: $"+val['manualPrice'].en+""+
                                  "</span>"+
                                  "<small class='text-muted'></small>"+
                                  "<a href='' class='product-name'>"+val['manualTitle'].en+"</a>"+
                                  "<div class='m-t text-righ'>"+
                                      "<a href='' class='btn btn-xs btn-outline btn-primary'>Info <i class='fa fa-long-arrow-right'></i></a>"+
                                  "</div>"+
                              "</div>"+
                          "</div>"+
                      "</div>"+
                  "</div>";
                });
                $("#productdata").html(prodcuct);
              });
              $('.year').each(function(){
                $(this).prop('checked',false);
              });
              $('.bodytype').each(function(){
                $(this).prop('checked',false);
              });
              $('.engine').each(function(){
                $(this).prop('checked',false);
              });
              $('.fueltype').each(function(){
                $(this).prop('checked',false);
              });
              $('.manual').each(function(){
                $(this).prop('checked',false);
              });
              $('.price').each(function(){
                $(this).prop('checked',false);
              });
            }
          }else{
            $('.series').each(function(){
              $(this).prop('checked',false);
            });
            $('.year').each(function(){
              $(this).prop('checked',false);
            });
            $('.bodytype').each(function(){
              $(this).prop('checked',false);
            });
            $('.engine').each(function(){
              $(this).prop('checked',false);
            });
            $('.fueltype').each(function(){
              $(this).prop('checked',false);
            });
            $('.manual').each(function(){
              $(this).prop('checked',false);
            });
            $('.price').each(function(){
              $(this).prop('checked',false);
            });
          }
        });

        $(document).on('click','.series',function(){
          var brandcheck = 0;
          $('.brand').each(function(){
            if($(this).is(':checked')){
              brandcheck = 1;
            }
          });
          if(brandcheck == 1){
            var seriescheck = 0;
            var yearcheck = 0;
            var bodytypecheck = 0;
            var enginecheck = 0;
            var fueltypecheck = 0;
            var manualcheck = 0;
            var pricecheck = 0;
            $('.series').each(function(){
              if($(this).is(':checked')){
                seriescheck = 1;
              }
            });
            $('.year').each(function(){
              if($(this).is(':checked')){
                yearcheck = 1;
              }
            });
            $('.bodytype').each(function(){
              if($(this).is(':checked')){
                bodytypecheck = 1;
              }
            });
            $('.engine').each(function(){
              if($(this).is(':checked')){
                enginecheck = 1;
              }
            });
            $('.fueltype').each(function(){
              if($(this).is(':checked')){
                fueltypecheck = 1;
              }
            });
            $('.manual').each(function(){
              if($(this).is(':checked')){
                manualcheck = 1;
              }
            });
            $('.price').each(function(){
              if($(this).is(':checked')){
                pricecheck = 1;
              }
            });
            if(seriescheck){
              if(yearcheck){
                if(bodytypecheck){
                  if(enginecheck){
                    if(fueltypecheck){
                      if(manualcheck){
                        if(pricecheck){

                        }else{
                          //Search here brand, series, year, body, engine, fueltype, manual
                        }
                      }else{
                        //Search here brand, series, year, body, engine, fueltype
                        $('.price').each(function(){
                          $(this).prop('checked',false);
                        });
                      }
                    }else{
                      //Search here Brand, Series, Year, Body, engine
                      $('.manual').each(function(){
                        $(this).prop('checked',false);
                      });
                      $('.price').each(function(){
                        $(this).prop('checked',false);
                      });
                    }
                  }else{
                    // Search here Brand, Series, Year, Body
                    $('.fueltype').each(function(){
                      $(this).prop('checked',false);
                    });
                    $('.manual').each(function(){
                      $(this).prop('checked',false);
                    });
                    $('.price').each(function(){
                      $(this).prop('checked',false);
                    });
                  }
                }else{
                  //Search here Brand, Series, year
                  $('.engine').each(function(){
                    $(this).prop('checked',false);
                  });
                  $('.fueltype').each(function(){
                    $(this).prop('checked',false);
                  });
                  $('.manual').each(function(){
                    $(this).prop('checked',false);
                  });
                  $('.price').each(function(){
                    $(this).prop('checked',false);
                  });
                }
              }else{
                //search here Brand and Series
                var MainSearch = []
                var BrandSearch = []
                var SeriesSearch = []
                $('.brand').each(function(){
                  if (this.checked) {
                    BrandSearch.push("manualBrand.en:"+$(this).val())
                  }
                });
                $('.series').each(function(){
                  if (this.checked){
                    SeriesSearch.push("manualSerie.en:"+$(this).val())
                  }
                });
                SeriesSearch.push(BrandSearch)
                index.search({
                  query: '*',
                  facetFilters: SeriesSearch
                }).then(res => {
                  // console.log(res);
                  var prodcuct = ""
                  $.each(res.hits, function( i, val ){
                    prodcuct += "<div class='col-md-4'>"+
                        "<div class='ibox'>"+
                            "<div class='ibox-content product-box'>"+
                                "<div class='product-imitation'>"+
                                    "<img src='https://www.datocms-assets.com"+val['manualImage'].path+"' alt='' height='200px;' width='200px;'>"+
                                "</div>"+
                                "<div class='product-desc'>"+
                                    "<span class='product-price'>"+
                                        "Price: $"+val['manualPrice'].en+""+
                                    "</span>"+
                                    "<small class='text-muted'></small>"+
                                    "<a href='' class='product-name'>"+val['manualTitle'].en+"</a>"+
                                    "<div class='m-t text-righ'>"+
                                        "<a href='' class='btn btn-xs btn-outline btn-primary'>Info <i class='fa fa-long-arrow-right'></i></a>"+
                                    "</div>"+
                                "</div>"+
                            "</div>"+
                        "</div>"+
                    "</div>";
                  });
                  $("#productdata").html(prodcuct);
                });

                $('.bodytype').each(function(){
                  $(this).prop('checked',false);
                });
                $('.engine').each(function(){
                  $(this).prop('checked',false);
                });
                $('.fueltype').each(function(){
                  $(this).prop('checked',false);
                });
                $('.manual').each(function(){
                  $(this).prop('checked',false);
                });
                $('.price').each(function(){
                  $(this).prop('checked',false);
                });
              }
            }else{
              //search here Brand
              var MainSearch = []
              var brandsearch = []
              $('.brand').each(function(){
                if (this.checked) {
                  var brand = $(this).val();
                  brandsearch.push("manualBrand.en:"+brand)
                }
              });
              MainSearch.push(brandsearch);
              index.search({
                query: '*',
                facetFilters: MainSearch
              }).then(res => {
                // console.log(res);
                var prodcuct = ""
                $.each(res.hits, function( i, val ){
                  prodcuct += "<div class='col-md-4'>"+
                      "<div class='ibox'>"+
                          "<div class='ibox-content product-box'>"+
                              "<div class='product-imitation'>"+
                                  "<img src='https://www.datocms-assets.com"+val['manualImage'].path+"' alt='' height='200px;' width='200px;'>"+
                              "</div>"+
                              "<div class='product-desc'>"+
                                  "<span class='product-price'>"+
                                      "Price: $"+val['manualPrice'].en+""+
                                  "</span>"+
                                  "<small class='text-muted'></small>"+
                                  "<a href='' class='product-name'>"+val['manualTitle'].en+"</a>"+
                                  "<div class='m-t text-righ'>"+
                                      "<a href='' class='btn btn-xs btn-outline btn-primary'>Info <i class='fa fa-long-arrow-right'></i></a>"+
                                  "</div>"+
                              "</div>"+
                          "</div>"+
                      "</div>"+
                  "</div>";
                });
                $("#productdata").html(prodcuct);
              });
              $('.year').each(function(){
                $(this).prop('checked',false);
              });
              $('.bodytype').each(function(){
                $(this).prop('checked',false);
              });
              $('.engine').each(function(){
                $(this).prop('checked',false);
              });
              $('.fueltype').each(function(){
                $(this).prop('checked',false);
              });
              $('.manual').each(function(){
                $(this).prop('checked',false);
              });
              $('.price').each(function(){
                $(this).prop('checked',false);
              });
            }
          }else{
            alert("Please Select First Brand");
            $('.series').each(function(){
              $(this).prop('checked',false);
            });
            $('.year').each(function(){
              $(this).prop('checked',false);
            });
            $('.bodytype').each(function(){
              $(this).prop('checked',false);
            });
            $('.engine').each(function(){
              $(this).prop('checked',false);
            });
            $('.fueltype').each(function(){
              $(this).prop('checked',false);
            });
            $('.manual').each(function(){
              $(this).prop('checked',false);
            });
            $('.price').each(function(){
              $(this).prop('checked',false);
            });
          }
        });

      </script>
      </div>
    </div>
    <div class="pure-u-7-24 my_rightbar">
      {{ partial "filter.html" . }}
    </div>
</div>
